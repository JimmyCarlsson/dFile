version: "3.5"

services:
    dfile:
        depends_on:
            - redis
        environment:
            - ENVIRONMENT=${ENVIRONMENT}
            - SECRET_KEY_BASE=${DFILE_SECRET_KEY_BASE}
            - REDIS_HOST=${REDIS_HOST}
            - REDIS_PORT=${REDIS_PORT}
        ports:
            - ${DFILE_RAILS_SERVICE_PORT}:3000
        networks:
            - default
    redis:
        image: redis:6.0.10
        volumes:
            - redis:/data
        command: redis-server
        networks:
            - default

volumes:
    redis:
networks:
    default:
        name: d-suit-net